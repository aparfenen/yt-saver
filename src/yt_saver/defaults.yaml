# Global defaults (safe & stable)
save_dir: "./downloads"

# Filename (file-part only; subdir templates apply in downloader):
outtmpl: "%(upload_date>%Y-%m-%d)s%(release_timestamp>_%H-%M-%S|)s - %(autonumber)02d - %(title).100s.%(ext)s"

# Subdir templates (used by wrapper to build full outtmpl path)
subdirs:
  per_item: "%(title).80s [%(id)s]"
  per_playlist: "%(playlist_title).80s [%(playlist_id)s]"

# Network / robustness
network:
  retries: 10
  fragment_retries: 10
  retry_sleep: "http:exp=1:30,fragment:exp=1:20"
  concurrent_fragment_downloads: 3
  socket_timeout: 30
  skip_unavailable_fragments: true
  sleep_requests: 1.2
  max_sleep_interval: 20

# Behavior
behavior:
  noplaylist: true
  continuedl: true
  overwrites: false
  windowsfilenames: true
  check_formats: true
  no_warnings: true
  ignoreerrors: true
  no_abort_on_error: true
  download_archive: "yt-dlp-archive.txt"

# Media flags common (profiles may override)
media:
  writeinfojson: true
  addmetadata: true
  # keep defaults neutral; profiles decide about subs/thumbnails below
  writesubtitles: false
  writeautomaticsub: true
  embedsubtitles: false
  subtitleslangs: ["en", "ru"]
  subtitlesformat: "srt"
  writethumbnail: false
  embedthumbnail: false

# Advanced
advanced:
  outtmpl_na_placeholder: "NA"

# Profiles
profiles:
  # Pure WEBM: no side files (subs/thumb off), best-effort webm A/V
  webm:
    format: "bv*[ext=webm]+ba[ext=webm]/bv*+ba/best"
    merge_output_format: "webm"
    remuxvideo: "webm"
    writesubtitles: false
    embedsubtitles: false
    writethumbnail: false
    embedthumbnail: false
    # leave subtitlesformat as-is; not used since we don't write/embed

  # Max compatibility (H.264/AAC where possible)
  mp4:
    format: "bv*[vcodec*=avc1]+ba[acodec*=mp4a]/bv*+ba/best"
    merge_output_format: "mp4"
    remuxvideo: "mp4"
    writesubtitles: true
    embedsubtitles: true
    writethumbnail: true
    embedthumbnail: true
    subtitlesformat: "srt"

  # Archival MKV: embed subs + thumbnail
  mkv:
    format: "bv*+ba/best"
    merge_output_format: "mkv"
    remuxvideo: "mkv"
    writesubtitles: true
    embedsubtitles: true
    writethumbnail: true
    embedthumbnail: true
    subtitlesformat: "srt"
    # Ensure ffmpeg writes proper SRT tracks when embedding:
    postprocessor_args:
      EmbedSubtitle: ["-c:s", "srt"]
